/*
ChocolateChip-UI
ChUI.js
Copyright 2014 Sourcebits www.sourcebits.com
License: MIT
Version: 3.6.1
*/
window.CHUIJSLIB,window.jQuery?window.CHUIJSLIB=window.jQuery:window.$chocolatechipjs&&(window.CHUIJSLIB=window.$chocolatechipjs),function(e){function t(e){return"tagName"in e?e:e.parentNode}function i(e,t,i,s){return Math.abs(e-t)>=Math.abs(i-s)?e-t>0?"left":"right":i-s>0?"up":"down"}function s(){if(d=null,u.last)try{u&&u.el&&(u.el.trigger("longtap"),u={})}catch(e){}}function n(){d&&clearTimeout(d),d=null}function a(){r&&clearTimeout(r),c&&clearTimeout(c),l&&clearTimeout(l),d&&clearTimeout(d),r=c=l=d=null,u={}}function o(t){function i(e){return/m/.test(e)?parseFloat(e):/s/.test(e)?100*parseFloat(e):void 0}var s,n;"transition"in document.body.style?s="transition-duration":"-webkit-transition"in document.body.style&&(s="-webkit-transition-duration"),n=i(e("article").eq(0).css(s)),setTimeout(function(){e(t).trigger({type:"navigationend"})},n)}e.extend({Uuid:function(){return Date.now().toString(36)},concat:function(e){return e instanceof Array?e.join(""):[].slice.apply(arguments).join("")},forEach:function(e,t,i){function s(e){var t=e.length,i=typeof e;return"function"===i||e===window?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}var n,a=0,o=e.length,r=s(e);if(i){if(r)for(;o>a&&(n=t.apply(e[a],i),n!==!1);a++);else for(a in e)if(n=t.apply(e[a],i),n===!1)break}else if(r)for(;o>a&&(n=t.call(e[a],e[a],a),n!==!1);a++);else for(a in e)if(n=t.call(e[a],e[a],a),n===!1)break}}),e.fn.extend({forEach:function(t,i){var s=this;return e.forEach(s,t,i)},iz:function(t){if(window.jQuery){var i=e();return this.forEach(function(s){e(s).is(t)&&i.push(s)}),i}return window.$chocolatechipjs?this.is(t):void 0},iznt:function(e){return window.jQuery?this.not(e):window.$chocolatechipjs?this.isnt(e):void 0},haz:function(e){return this.has(e)},haznt:function(t){if(window.jQuery){var i=e();return this.forEach(function(s){e(s).has(t)[0]||i.push(s)}),i}return window.$chocolatechipjs?this.hasnt(t):void 0},hazClass:function(t){if(window.jQuery){var i=e();return this.forEach(function(s){e(s).hasClass(t)&&i.push(s)}),i}return window.$chocolatechipjs?this.hasClass(t):void 0},hazntClass:function(t){if(window.jQuery){var i=e();return this.forEach(function(s){e(s).hasClass(t)||i.push(s)}),i}if(window.$chocolatechipjs){var i=[];return this.forEach(function(e){e.classList.contains(t)&&i.push(e)}),i}},hazAttr:function(t){if(window.jQuery){var i=e();return this.forEach(function(s){e(s).attr(t)&&i.push(s)}),i}if(window.$chocolatechipjs){var i=[];return i}},hazntAttr:function(t){if(window.jQuery){var i=e();return this.forEach(function(s){e(s).attr(t)||i.push(s)}),i}if(window.$chocolatechipjs){var i=[];return ctx.hasAttribute(t)||i.push(ctx),i}}}),e.extend({eventStart:null,eventEnd:null,eventMove:null,eventCancel:null,gestureLength:30}),e(function(){window.navigator.pointerEnabled?(e.eventStart="pointerdown",e.eventEnd="pointerup",e.eventMove="pointermove",e.eventCancel="pointercancel"):window.navigator.msPointerEnabled?(e.eventStart="MSPointerDown",e.eventEnd="MSPointerUp",e.eventMove="MSPointerMove",e.eventCancel="MSPointerCancel"):"ontouchstart"in window?(e.eventStart="touchstart",e.eventEnd="touchend",e.eventMove="touchmove",e.eventCancel="touchcancel"):(e.eventStart="mousedown",e.eventEnd="click",e.eventMove="mousemove",e.eventCancel="mouseout")}),e.extend({isiPhone:/iphone/gim.test(navigator.userAgent),isiPad:/ipad/gim.test(navigator.userAgent),isiPod:/ipod/gim.test(navigator.userAgent),isiOS:/ip(hone|od|ad)/gim.test(navigator.userAgent),isAndroid:/android/gim.test(navigator.userAgent)&&!/trident/gim.test(navigator.userAgent),isWebOS:/webos/gim.test(navigator.userAgent),isBlackberry:/blackberry/gim.test(navigator.userAgent),isTouchEnabled:"createTouch"in document,isOnline:navigator.onLine,isStandalone:navigator.standalone,isiOS6:navigator.userAgent.match(/OS 6/i),isiOS7:navigator.userAgent.match(/OS 7/i),isWin:/trident/gim.test(navigator.userAgent),isWinPhone:/trident/gim.test(navigator.userAgent)&&/mobile/gim.test(navigator.userAgent),isIE10:navigator.userAgent.match(/msie 10/i),isIE11:navigator.userAgent.match(/msie 11/i),isWebkit:navigator.userAgent.match(/webkit/),isMobile:/mobile/gim.test(navigator.userAgent),isDesktop:!/mobile/gim.test(navigator.userAgent),isSafari:!/Chrome/gim.test(navigator.userAgent)&&/Safari/gim.test(navigator.userAgent)&&!/android/gim.test(navigator.userAgent),isChrome:/Chrome/gim.test(navigator.userAgent),isNativeAndroid:/android/i.test(navigator.userAgent)&&/webkit/i.test(navigator.userAgent)&&!/chrome/i.test(navigator.userAgent)}),e.extend({browserVersion:function(){var e,t=navigator.appName,i=navigator.userAgent,s=i.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return s&&null!==(e=i.match(/version\/([\.\d]+)/i))&&(s[2]=e[1]),s=s?[s[1],s[2]]:[t,navigator.appVersion,"-?"],s[1]}}),e(function(){e.body=e("body"),/android/gim.test(navigator.userAgent)&&/webkit/gim.test(navigator.userAgent)&&!/Chrome/gim.test(navigator.userAgent)&&e.body.addClass("isNativeAndroidBrowser"),e.isWin?e.body.addClass("isWindows"):e.isiOS?e.body.addClass("isiOS"):e.isAndroid&&e.body.addClass("isAndroid"),e.isSafari&&6===parseInt(e.browserVersion(),10)&&e.body.addClass("isSafari6"),e.isNativeAndroid&&e.body.addClass("isNativeAndroidBrowser")});var r,l,c,d,u={},h=750,p=150;e(function(){var o,v,f=e(document.body),g=!1;f.on(e.eventStart,function(i){if(o=Date.now(),v=o-(u.last||o),i.originalEvent&&(i=i.originalEvent),window.navigator.msPointerEnabled||window.navigator.pointerEnabled){if(window&&window.jQuery&&e===window.jQuery){if(i.originalEvent&&!i.originalEvent.isPrimary)return}else if(!i.isPrimary)return;i=i.originalEvent?i.originalEvent:i,f.on("MSHoldVisual",function(e){e.preventDefault()}),u.el=e(t(i.target)),r&&clearTimeout(r),u.x1=i.pageX,u.y1=i.pageY,g=!1}else"mousedown"===e.eventStart?(u.el=e(t(i.target)),r&&clearTimeout(r),u.x1=i.pageX,u.y1=i.pageY,g=!1):1===i.touches.length&&(u.el=e(t(i.touches[0].target)),r&&clearTimeout(r),u.x1=i.touches[0].pageX,u.y1=i.touches[0].pageY,g=2===i.targetTouches.length?!0:!1);v>0&&250>=v&&(u.isDoubleTap=!0),u.last=o,d=setTimeout(s,h)}),f.on(e.eventMove,function(t){if(t.originalEvent&&(t=t.originalEvent),window.navigator.msPointerEnabled){if(window&&window.jQuery&&e===window.jQuery){if(t.originalEvent&&!t.originalEvent.isPrimary)return}else if(!t.isPrimary)return;t=t.originalEvent?t.originalEvent:t,n(),u.x2=t.pageX,u.y2=t.pageY}else n(),"mousemove"===e.eventMove?(u.x2=t.pageX,u.y2=t.pageY):1===t.touches.length&&(u.x2=t.touches[0].pageX,u.y2=t.touches[0].pageY);if(e.isAndroid){if(e.gestureLength=10,!u.el)return;u.x2&&Math.abs(u.x1-u.x2)>e.gestureLength||u.y2&&Math.abs(u.y1-u.y2)>e.gestureLength?l=setTimeout(function(){t.preventDefault(),u&&u.el&&(u.el.trigger("swipe"),u.el.trigger("swipe"+i(u.x1,u.x2,u.y1,u.y2)),u={})},0):"last"in u&&(c=setTimeout(function(){u&&u.el&&u.el.trigger("tap"),u&&u.isDoubleTap?u&&u.el&&(u.el.trigger("doubletap"),u={}):r=setTimeout(function(){return r=null,u&&u.el?(u.el.trigger("singletap"),u={},!1):void 0},p)},0))}}),f.on(e.eventEnd,function(t){if(window.navigator.msPointerEnabled)if(window&&window.jQuery&&e===window.jQuery){if(t.originalEvent&&!t.originalEvent.isPrimary)return}else if(!t.isPrimary)return;n(),u.el&&(u.x2&&Math.abs(u.x1-u.x2)>e.gestureLength||u.y2&&Math.abs(u.y1-u.y2)>e.gestureLength?l=setTimeout(function(){u&&u.el&&(u.el.trigger("swipe"),u.el.trigger("swipe"+i(u.x1,u.x2,u.y1,u.y2)),u={})},0):"last"in u&&(c=setTimeout(function(){u&&u.el&&u.el.trigger("tap"),u&&u.isDoubleTap?u&&u.el&&(u.el.trigger("doubletap"),u={}):r=setTimeout(function(){return r=null,u&&u.el?(u.el.trigger("singletap"),u={},!1):void 0},p)},0)))}),f.on("touchcancel",a)}),["swipe","swipeleft","swiperight","swipeup","swipedown","doubletap","tap","singletap","longtap"].forEach(function(t){e.fn.extend({method:function(e){return this.on(t,e)}})}),e.extend({UIDesktopCompat:function(){e.isDesktop&&e.isSafari?e("body").addClass("isiOS").addClass("isDesktopSafari isDesktop"):e.isDesktop&&e.isChrome&&e("body").addClass("isAndroid").addClass("isDesktopChrome isDesktop")}}),e(function(){e.UIDesktopCompat()}),e(function(){e.body=e("body"),e.body[0].classList.contains("splitlayout")||e("body").prepend("<nav id='global-nav'></nav>"),e.body[0].classList.contains("splitlayout")&&window.innerWidth<768&&e("meta[name=viewport]").attr("content","width=device-width, initial-scale=0.45, maximum-scale=2, user-scalable=yes"),e("h1").each(function(e,t){t.nextElementSibling&&"A"===t.nextElementSibling.nodeName&&t.classList.add("buttonOnRight")}),e(".toolbar").prev("article").addClass("has-toolbar"),e.isiOS&&e.isStandalone&&e.body[0].classList.add("isStandalone")}),e.extend({UIHideNavBar:function(){e("nav").hide(),e.body.addClass("hide-navbars")},UIShowNavBar:function(){e("nav").show(),e.body.removeClass("hide-navbars")}}),e.extend({subscriptions:{},subscribe:function(t,i){e.subscriptions[t]||(e.subscriptions[t]=[]);var s=e.Uuid();return e.subscriptions[t].push({token:s,callback:i}),s},unsubscribe:function(t){setTimeout(function(){for(var i in e.subscriptions)if(e.subscriptions[i])for(var s=0,n=e.subscriptions[i].length;n>s;s++)if(e.subscriptions[i][s].token===t)return e.subscriptions[i].splice(s,1),t;return!1})},publish:function(t,i){return e.subscriptions[t]?(setTimeout(function(){for(var s=e.subscriptions[t]?e.subscriptions[t].length:0;s--;)e.subscriptions[t][s].callback(t,i);return!0}),!0):!1}}),e.extend({UITrackHashNavigation:function(t,i){t=t||!0,e.UISetHashOnUrl(e.UINavigationHistory[e.UINavigationHistory.length-1],i)},UISetHashOnUrl:function(t,i){i=i||"#/";var s;s=/^#/.test(t)?i+t.split("#")[1]:i+t,e.isAndroid?(/#/.test(t)&&(t=t.split("#")[1]),/\//.test(t)&&(t=t.split("/")[1]),window.location.hash="#/"+t):window.history.replaceState("Object","Title",s)},UIGoBackToArticle:function(t){var i,s,n=e.UINavigationHistory.indexOf(t),a=e("article.current"),r=e(t);0===e.UINavigationHistory.length&&(r=e("article:first-of-type"),e.UINavigationHistory.push("#"+r[0].id));var l;l=e.UINavigationHistory.length>1?e.UINavigationHistory.splice(n+1):e("article.previous"),e.publish("chui/navigateBack/leave",a[0].id),e.publish("chui/navigateBack/enter",r[0].id),a[0].scrollTop=0,r[0].scrollTop=0,l.length&&e.forEach(l,function(t){e(t).removeClass("previous").addClass("next"),e(t).prev().removeClass("previous").addClass("next")}),i=a.next().hazClass("toolbar"),s=r.next().hazClass("toolbar"),r.removeClass("previous next").addClass("current"),r.prev().removeClass("previous next").addClass("current"),s.removeClass("previous next").addClass("current"),a.removeClass("current").addClass("next"),a.prev().removeClass("current").addClass("next"),i.removeClass("current").addClass("next"),e(".toolbar.previous").removeClass("previous").addClass("next"),e.UISetHashOnUrl(e.UINavigationHistory[e.UINavigationHistory.length-1]),o(r)},UIGoBack:function(){var t,i,s=e.UINavigationHistory.length,n=e("article.current"),a=e(e.UINavigationHistory[s-2]);0===s&&(a=e("article:first-of-type"),e.UINavigationHistory.push("#"+a[0].id)),e.publish("chui/navigateBack/leave",n[0].id),e.publish("chui/navigateBack/enter",a[0].id),n[0].scrollTop=0,a[0].scrollTop=0,t=n.next().hazClass("toolbar"),i=a.next().hazClass("toolbar"),a.removeClass("previous").addClass("current"),a.prev().removeClass("previous").addClass("current"),i.removeClass("previous").addClass("current"),n.removeClass("current").addClass("next"),n.prev().removeClass("current").addClass("next"),t.removeClass("current").addClass("next"),e.UISetHashOnUrl(e.UINavigationHistory[s-2]),1!==e.UINavigationHistory.length&&(e.UINavigationHistory.pop(),o(a))},isNavigating:!1,UIGoToArticle:function(t){if(!e.isNavigating){e.isNavigating=!0;var i=e("article.current"),s=i.prev();t=e(t);var n,a,r="#"+t[0].id,l=t.prev(),c="next previous";e.publish("chui/navigate/leave",i[0].id),e.UINavigationHistory.push(r),e.publish("chui/navigate/enter",t[0].id),i[0].scrollTop=0,t[0].scrollTop=0,n=i.next().hazClass("toolbar"),a=t.next().hazClass("toolbar"),i.removeClass("current").addClass("previous"),s.removeClass("current").addClass("previous"),n.removeClass("current").addClass("previous"),t.removeClass(c).addClass("current"),l.removeClass(c).addClass("current"),a.removeClass(c).addClass("current"),e.UISetHashOnUrl(t[0].id),setTimeout(function(){e.isNavigating=!1},500),o(t)}}}),e(function(){e.extend({UINavigationHistory:["#"+e("article").eq(0).attr("id")]}),e("nav:not(#global-nav)").forEach(function(t,i){e("body")[0].classList.contains("splitlayout")||t.classList.add(0===i?"current":"next")}),e("article").forEach(function(t,i){e("body")[0].classList.contains("splitlayout")||e("body")[0].classList.contains("slide-out-app")||t.classList.add(0===i?"current":"next")}),e("body").on("singletap","a.back",function(){this.classList.contains("back")&&e.UIGoBack()}),e("body").on("singletap doubletap","li",function(){var t=e(this);if(!e.isNavigating&&this.hasAttribute("data-goto")&&this.getAttribute("data-goto")&&document.getElementById(this.getAttribute("data-goto"))&&!e(this).parent()[0].classList.contains("deletable")){t.addClass("selected");var i="#"+this.getAttribute("data-goto");e(i).addClass("navigable"),setTimeout(function(){t.removeClass("selected")},500);var s=e(i);e.UIGoToArticle(s)}}),e("li[data-goto]").forEach(function(t){e(t).closest("article").addClass("navigable");var i="#"+t.getAttribute("data-goto");e(i).addClass("navigable")}),e("article").eq(1)[0]&&e.UISetHashOnUrl(e("article").eq(0)[0].id),e("nav").on(e.eventStart,function(e){e.preventDefault()})}),e(function(){e("body").on("singletap",".button",function(){var t=e(this);t.parent(".segmented")[0]||t.parent(".tabbar")[0]||e.isDesktop||(t.addClass("selected"),setTimeout(function(){t.removeClass("selected")},500))})}),e.fn.extend({UIBlock:function(t){return t=t?" style='opacity:"+t+"'":" style='opacity: .5;'",e(this).before("<div class='mask'"+t+"></div>"),e("article.current").attr("aria-hidden",!0),this},UIUnblock:function(){return e(".mask").remove(),e("article.current").removeAttr("aria-hidden"),this}}),e.fn.extend({UICenter:function(){if(this[0]){var t,i=e(this),s=i.parent();t="absolute"!==i.css("position")?"relative":"absolute";var n,a,o,r;"absolute"===t?(n=i[0].clientHeight,a=i[0].clientWidth,o=s[0].clientHeight,r=s[0].clientWidth):(n=parseInt(i.css("height"),10),a=parseInt(i.css("width"),10),o=parseInt(s.css("height"),10),r=parseInt(s.css("width"),10));var l,c;"body"===s[0].nodeName?(l=window.innerHeight/2+window.pageYOffset-n/2+"px",c=window.innerWidth/2-a/2+"px"):(l=o/2-n/2+"px",c=r/2-a/2+"px"),"absolute"!==t&&(c=0),i.css({left:c,top:l})}}}),e.fn.extend({UIBusy:function(t){t=t||{};var i,s=this,n=t.color||"#000",a=t.size||"80px",o=t&&"right"===t.position?"align-flush":null,r=t.duration||"2s",l=function(){var t={"-webkit-animation-duration":r};return i=e('<span class="busy"></span>'),e(i).css({"background-color":n,height:a,width:a}),e(i).css(t),e(i).attr("role","progressbar"),o&&e(i).addClass(o),s.append(i),this},c=function(){var t={"-webkit-animation-duration":r};return i=e('<div class="busy"><div></div><div></div></div>'),e(i).css({height:a,width:a,"background-image":"url(\"data:image/svg+xml;utf8,<svg xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' version='1.1' x='0px' y='0px' width='400px' height='400px' viewBox='0 0 400 400' enable-background='new 0 0 400 400' xml:space='preserve'><circle fill='none' stroke='"+n+"' stroke-width='20' stroke-miterlimit='10' cx='199' cy='199' r='174'/></svg>\")"}),e(i).css(t),e(i).attr("role","progressbar"),e(i).innerHTML="<div></div><div></div>",o&&e(i).addClass("align-"+o),s.append(i),this},d=function(){return i=e('<progress class="busy"></progress>'),e(i).css({color:n}),e(i).attr("role","progressbar"),e(i).addClass("win-ring"),o&&e(i).addClass("align-"+o),s.append(i),this};e.isWin?d(t):e.isAndroid||e.isChrome?c(t):(e.isiOS||e.isSafari)&&l(t)}}),e.extend({UIPopup:function(t){if(t){var i,s=t.id||e.Uuid(),n=t.title?"<header><h1>"+t.title+"</h1></header>":"",a=t.message?'<p role="note">'+t.message+"</p>":"",o=t.cancelButton?'<a href="javascript:void(null)" class="button cancel" role="button">'+t.cancelButton+"</a>":"",r=t.continueButton?'<a href="javascript:void(null)" class="button continue" role="button">'+t.continueButton+"</a>":"",l=t.callback||e.noop,c=t.empty?" noTitle":"",d=e.concat('<div class="popup closed',c,'" role="alertdialog" id="',s,'"><div class="panel">',n,a,"</div><footer>",o,r,"</footer>",i,"</div>");e("body").append(d),l&&r&&e(".popup").find(".continue").on(e.eventStart,function(){e(".popup").UIPopupClose(),l.call(l)}),e.UICenterPopup(),setTimeout(function(){e("body").find(".popup").removeClass("closed")},200),e("body").find(".popup").UIBlock("0.5");var u=e.eventStart+" singletap "+e.eventEnd;e(".mask").on(u,function(e){e.stopPropagation()})}},UICenterPopup:function(){var t=e(".popup");if(t[0]){var i,s=window.innerHeight/2+window.pageYOffset-t[0].clientHeight/2+"px";i=320===window.innerWidth?"10px":Math.floor((window.innerWidth-318)/2)+"px",t.css(e.isWin?{top:s}:{left:i,top:s})}}}),e.fn.extend({UIPopupClose:function(){(this||this.classList.contains("popup"))&&(e(this).UIUnblock(),e(this).remove())}}),e(function(){e("body").on(e.eventStart,".cancel",function(){e(this).closest(".popup")[0]&&e(this).closest(".popup").UIPopupClose()}),e(window).on("resize",function(){e.UICenterPopup()})}),e.fn.extend({UIPopover:function(t){if(!t)return[];var i,s=e(this);this[0].id?i=this[0].id:(i=e.Uuid(),s.attr("id",i));var n=t.id?t.id:e.Uuid(),a=t.title?"<header><h1>"+t.title+"</h1></header>":"",o=t.callback?t.callback:e.noop,r='<div class="popover" id="'+n+'">'+a+"<section></section></div>",l=function(t){var i,s,n=e(t).offset(),a=n.left,o=e(".popover"),r=o.offset();i=r.left,s=n.top+e(t)[0].clientHeight,o.css(o.width()+n.left>window.innerWidth?{left:window.innerWidth-o.width()-20+"px",top:s+20+"px"}:{left:a+"px",top:s+20+"px"})};e(this).on(e.eventStart,function(){if(e(".mask")[0])return e.UIPopoverClose(),void e("body").UIUnblock();var t=this;e(this).addClass("selected"),setTimeout(function(){e(t).removeClass("selected")},1e3),e("body").append(r),e(".popover").UIBlock(".5");var s="singletap";e.isWin&&e.isDesktop&&(s=e.eventStart+" singletap "+e.eventEnd),e(".mask").on(s,function(e){e.preventDefault(),e.stopPropagation()}),e(".popover").data("triggerEl",i),e.isWin?(l(t),e(".popover").addClass("open")):(e(".popover").addClass("open"),setTimeout(function(){l(t)})),o.call(o,t)})}}),e.extend({UIAlignPopover:function(){var t=e(".popover");if(t.length){var i=t.data("triggerEl"),s=e("#"+i).offset(),n=s.left;t.css(e(t).width()+s.left>window.innerWidth?{left:window.innerWidth-e(t).width()-20+"px"}:{left:n+"px"})}}}),e.extend({UIPopoverClose:function(){e("body").UIUnblock(),e(".popover").css("visibility","hidden"),setTimeout(function(){e(".popover").remove()},10)}}),e(function(){e(window).on("resize",function(){e.UIAlignPopover()});var t=e.eventStart+" singletap "+e.eventEnd;e("body").on(t,".mask",function(t){if(e(".popover")[0])e.UIPopoverClose();else{if(t&&1===t.nodeType)return;t.stopPropogation()}})}),e.fn.extend({UISegmented:function(t){if(!e(this).hazClass("paging").length){var i=t&&t.callback?t.callback:e.noop,s=t&&t.selected>0?t.selected:0;this.find("a").forEach(function(t,i){e(t).find("a").attr("role","radio"),i===s&&(t.setAttribute("aria-checked","true"),t.classList.add("selected"))}),this.on("singletap",".button",function(t){var s=e(this);this.parentNode.classList.contains("paging")||(s.siblings("a").removeClass("selected"),s.siblings("a").removeAttr("aria-checked"),s.addClass("selected"),s.attr("aria-checked",!0),i.call(this,t))})}}}),e.extend({UICreateSegmented:function(t){var i,s=t&&t.id?t.id:e.Uuid(),n=t&&t.className?t.className:"",a=t&&t.labels?t.labels:[],o=(t&&t.selected?t.selected:0,['<div class="segmented']);return n&&o.push(" "+n),o.push('">'),a.forEach(function(e){o.push('<a role="radio" class="button'),o.push('"'),o.push(">"),o.push(e),o.push("</a>")}),o.push("</div>"),i=e(o.join("")),i.attr("id",s),i}}),e.fn.extend({UIPanelToggle:function(t,i){var s,n=0;n=this.children().hazClass("selected").index()||0,t instanceof Array?s=t.children("div"):"string"==typeof t&&(s=e(t).children("div")),s.eq(n).siblings().css({display:"none"}),i&&i.apply(this,arguments),this.on(e.eventEnd,"a",function(){s.eq(e(this).index()).css({display:"block"}).siblings().css("display","none")}),this.on("singletap",".button",function(){var t=e(this);this.parentNode.classList.contains("paging")||(t.siblings("a").removeClass("selected"),t.siblings("a").removeAttr("aria-checked"),t.addClass("selected"),t.attr("aria-checked",!0))})}}),e.extend({UIPaging:function(){var t=e(".segmented.paging").closest("nav").next();e(".segmented.paging").hazClass("horizontal").length?t.addClass("horizontal"):e(".segmented.paging").hazClass("vertical").length&&t.addClass("vertical"),t.children().eq(0).addClass("current"),t.children().eq(0).siblings().addClass("next");var i=function(){return t.children().length},s=function(s){if(1!==i()){s.next().removeClass("selected"),s.addClass("selected");var n;n=e("section.current"),0===n.index()?(n.removeClass("current"),t.children().eq(i()-1).addClass("current").removeClass("next"),t.children().eq(i()-1).siblings().removeClass("next").addClass("previous")):(n.removeClass("current").addClass("next"),n.prev().removeClass("previous").addClass("current")),setTimeout(function(){s.removeClass("selected")},250)}},n=function(s){if(1!==i()){s.prev().removeClass("selected"),s.addClass("selected");var n;s[0].classList.contains("disabled")||(n=e("section.current"),n.index()===i()-1?(n.removeClass("current"),t.children().eq(0).addClass("current").removeClass("previous"),t.children().eq(0).siblings().removeClass("previous").addClass("next")):(n.removeClass("current").addClass("previous"),n.next().removeClass("next").addClass("current")),setTimeout(function(){s.removeClass("selected")},250))}};e(".segmented.paging").on(e.eventStart,".button:first-of-type",function(){s(e(this))}),e(".segmented.paging").on(e.eventStart,".button:last-of-type",function(){n(e(this))}),e("article.paging.horizontal")[0]&&(e("article.paging").on("swiperight",function(){s(e(".button:first-of-type"))}),e("article.paging").on("swipeleft",function(){n(e(".button:last-of-type"))})),e("article.paging.vertical")[0]&&(e("article.paging").on("swipeup",function(){s(e(".button:first-of-type"))}),e("article.paging").on("swipeudown",function(){n(e(".button:last-of-type"))}))}}),e.fn.extend({UIDeletable:function(t){var i=this;if(t)return t&&t.list?e.UIDeletable(t):t&&!t.list?(e.extend(t,{list:i}),e.UIDeletable(t)):void 0}}),e.extend({UIDeletable:function(t){if(t&&t.list&&!(!t instanceof Array)){var i,s,n,a,o=e(t.list),r=t.editLabel||"Edit",l=t.doneLabel||"Done",c=t.deleteLabel||"Delete",d=t.placement||"right",u=t.callback||e.noop,h="swiperight",p="swipeleft",v=e("html").attr("dir");v=v?v.toLowerCase():"","rtl"===v&&(h="swipeleft",p="swiperight"),e.isWin&&(c="");{e("li").eq(0)[0].clientHeight}i=e.concat('<a href="javascript:void(null)" class="button delete">',c,"</a>"),s=e.concat('<a href="javascript:void(null)" class="button edit">',r,"</a>"),n='<span class="deletion-indicator"></span>',"left"===d?o[0].classList.contains("deletable")||o.closest("article").prev().prepend(s):o[0].classList.contains("deletable")?a=o.closest("article").prev().find(".edit"):(o.closest("article").prev().append(s),o.closest("article").prev().find("h1").addClass("buttonOnRight"),o.closest("article").prev().find(".edit").addClass("align-flush"),a=o.closest("article").prev().find(".edit")),o.find("li").forEach(function(t){e(t).has(".deletion-indicator").length||(e(t).prepend(n),e(t).append(i))}),o.addClass("deletable");var f=function(t,i,s){e(function(){s.on("singletap",function(){var t=this;this.classList.contains("edit")?setTimeout(function(){t.classList.remove("edit"),t.classList.add("done"),e(t).text(l),e(i).addClass("showIndicators")}):this.classList.contains("done")&&setTimeout(function(){t.classList.remove("done"),t.classList.add("edit"),e(t).text(r),e(i).removeClass("showIndicators"),e(i).find("li").removeClass("selected")})}),e(i).off("singletap",".deletion-indicator"),e(i).on("singletap",".deletion-indicator",function(){return e(this).parent("li").hazClass("selected").length?void e(this).parent("li").removeClass("selected"):void e(this).parent("li").addClass("selected")}),(e.isiOS||e.isSafari)&&(e(i).on(h,"li",function(){e(this).removeClass("selected")}),e(i).on(p,"li",function(){e(this).addClass("selected")})),e(i).on("singletap",".delete",function(){var i=this,s="-1000%";"rtl"===e("html").attr("dir")&&(s="1000%"),e(this).siblings().css({"-webkit-transform":"translate3d("+s+",0,0)","-webkit-transition":"all 1s ease-out"}),setTimeout(function(){t.call(t,i),e(i).parent().remove()},500)})})};return f(u,o,a)}}}),e.fn.extend({UISelectList:function(t){var i=t&&t.name?t.name:e.Uuid(),s=this[0];s.classList.add("select"),e(s).find("li").forEach(function(s,n){var a=null!==s.getAttribute("data-select-value")?s.getAttribute("data-select-value"):"";s.setAttribute("role","radio"),e(s).removeClass("selected").find("input").removeAttr("checked"),t&&t.selected===n?(s.setAttribute("aria-checked","true"),s.classList.add("selected"),e(s).find("input")[0]?e(s).find("input").prop("checked",!0).attr("value",a):e(s).append('<input type="radio" checked="checked" name="'+i+'" value="'+a+'">')):e(s).find("input")[0]||e(s).append('<input type="radio" name="'+i+'" value="'+a+'">')}),e(s).on("singletap","li",function(){var i=this;e(i).siblings("li").removeClass("selected"),e(i).siblings("li").removeAttr("aria-checked"),e(i).siblings("li").find("input").removeAttr("checked"),e(i).addClass("selected"),i.setAttribute("aria-checked",!0),e(i).find("input").prop("checked",!0),t&&t.callback&&t.callback.apply(this,arguments)})}}),e.extend({UISheet:function(t){var i=e.Uuid(),s="",n="";t&&(i=t.id?t.id:i,s=t.listClass?" "+t.listClass:"",n=' style="background-color:'+t.background+';" '||"");var a='<div id="'+i+'" class="sheet'+s+'"><div class="handle"></div><section class="scroller-vertical"></section></div>';e("body").append(a),e(".sheet .handle").on(e.eventStart,function(){e.UIHideSheet()})},UIShowSheet:function(){e("article.current").addClass("blurred"),e.isAndroid||e.isChrome?(e(".sheet").css("display","block"),setTimeout(function(){e(".sheet").addClass("opened")},20)):e(".sheet").addClass("opened")},UIHideSheet:function(){e(".sheet").removeClass("opened"),e("article.current").addClass("removeBlurSlow"),setTimeout(function(){e("article").removeClass("blurred"),e("article").removeClass("removeBlurSlow")},500)}}),e.extend({UISlideout:function(t){var i,s,n=e.noop;i=t&&t.position?t.position:"left",s=t&&t.dynamic?t.dynamic:!1,t&&t.callback&&(n=t.callback);var a=e("<a class='button slide-out-button' href='javascript:void(null)'></a>"),o='<div class="slide-out"><section></section></div>';e("article").removeClass("next"),e("article").removeClass("current"),e("article").prev().removeClass("next"),e("article").prev().removeClass("current"),e("body").append(o),e("body").addClass("slide-out-app"),e("article:first-of-type").addClass("show"),e("article:first-of-type").prev().addClass("show"),e("#global-nav").append(a),e(".slide-out-button").on(e.eventStart,function(){e(".slide-out").toggleClass("open")}),s?e(".slide-out").on("singletap","li",function(){n(this)}):e(".slide-out").on("singletap","li",function(){var t="#"+e(this).attr("data-show-article");e.UINavigationHistory[0]=t,e.UISetHashOnUrl(t),e.publish("chui/navigate/leave",e("article.show")[0].id),e.publish("chui/navigate/enter",t),e(".slide-out").removeClass("open"),e("article").removeClass("show"),e("article").prev().removeClass("show"),e(t).addClass("show"),e(t).prev().addClass("show")})}}),e.extend(e.UISlideout,{populate:function(t){var i=e(".slide-out");if(i[0]&&e.isArray(t)){i.find("section").append('<ul class="list"></ul>');var s=i.find("ul");t.forEach(function(e){for(var t in e)s.append("header"===t?'<li class="slideout-header"><h2>'+e[t]+"</h2></li>":'<li data-show-article="'+t+'"><h3>'+e[t]+"</h3></li>")})}}}),e.fn.extend({UIStepper:function(t){if(!t)return[];if(!t.start)return[];if(!t.end)return[];var i=e(this),s=t.start,n=t.end,a=t.defaultValue?t.defaultValue:t.start,o="+",r="-";e.isWin&&(o="",r="");var l='<a href="javascript:void(null)" class="button decrease">'+r+"</a>",c="<label>"+a+'</label><input type="text" value="'+a+'">',d='<a href="javascript:void(null)" class="button increase">'+o+"</a>";i.append(l+c+d),i.data("ui-value",{start:s,end:n,defaultValue:a});var u=function(){var t,s=i.find("input").val(),n=i.data("ui-value"),a=n.start;a>=s?e(this).addClass("disabled"):(t=Number(s)-1,i.find(".button:last-of-type").removeClass("disabled"),i.find("label").text(t),i.find("input")[0].value=t,s===a&&e(this).addClass("disabled"))},h=function(){var t,s=i.find("input").val(),n=i.data("ui-value"),a=n.end;s>=a?e(this).addClass("disabled"):(t=Number(s)+1,i.find(".button:first-of-type").removeClass("disabled"),i.find("label").text(t),i.find("input")[0].value=t,s===a&&e(this).addClass("disabled"))};i.find(".button:first-of-type").on("singletap",function(){u.call(this,i)}),i.find(".button:last-of-type").on("singletap",function(){h.call(this,i)})}}),e.extend({UIResetStepper:function(e){var t=e.data("ui-value").defaultValue;e.find("label").html(t),e.find("input")[0].value=t}}),e.fn.extend({UISwitch:function(){var t=!1;this.forEach(function(i){i.setAttribute("role","checkbox"),e(i).data("ui-setup")!==!0&&(i.querySelector("input")||i.insertAdjacentHTML("afterBegin",'<input type="checkbox">'),i.classList.contains("on")&&i.querySelector("input").setAttribute("checked","checked"),i.querySelector("em")&&(t=!0),t||i.insertAdjacentHTML("afterBegin","<em></em>"),e(i).on("singletap",function(){var e=i.querySelector("input");i.classList.contains("on")?(i.classList.remove("on"),i.removeAttribute("aria-checked"),e.removeAttribute("checked")):(i.classList.add("on"),e.setAttribute("checked","checked"),i.setAttribute("aria-checked",!0))}),e(i).on("swipeleft",function(){var e=i.querySelector("input");i.classList.contains("on")&&(i.classList.remove("on"),i.removeAttribute("aria-checked"),e.removeAttribute("checked"))}),e(i).on("swiperight",function(){var e=i.querySelector("input");i.classList.contains("on")||(i.classList.add("on"),e.setAttribute("checked","checked"),i.setAttribute("aria-checked",!0))}),e(i).data("ui-setup",!0))})}}),e.extend({UICreateSwitch:function(t){var i=t?t.id:e.Uuid(),s=t&&t.name?' name="'+t.name+'"':"",n=t&&t.value?' value="'+t.value+'"':"",a=t&&"on"===t.state?" "+t.state:"",o=t&&"on"===t.state?' checked="checked"':"",r=e.concat('<span class="switch',a,'" id="',i,'"><em></em>','<input type="checkbox"',s,o,n,"></span>");return e(r)}}),e(function(){e(".switch").UISwitch()}),document.addEventListener("touchstart",function(e){var t=e.target,i=0;for(i=0;10>i;i+=1)null!==t&&(void 0!==t.className&&t.className.match("navigable")&&(0===t.scrollTop?t.scrollTop=1:t.scrollTop+t.offsetHeight===t.scrollHeight&&(t.scrollTop=t.scrollTop-1)),t=t.parentNode)}),e.extend({UITabbar:function(t){if(t){e("body").addClass("hasTabBar"),e.isiOS6&&e("body").addClass("isiOS6");for(var i=t.id||e.Uuid(),s=t.selected||"",n='<div class="tabbar" id="'+i+'">',a=e.isiOS||e.isSafari?'<span class="icon"></span>':"",o=0;o<t.tabs;o++)n+='<a class="button '+t.icons[o],s===o+1&&(n+=" selected"),n+='">'+a+"<label>"+t.labels[o]+"</label></a>";n+="</div>",e("body").append(n),e("nav").removeClass("current").addClass("next"),e("#global-nav").removeClass("next"),e("nav").eq(s).removeClass("next").addClass("current"),e("article").removeClass("current").addClass("next"),e("article").eq(s-1).removeClass("next").addClass("current"),e(".tabbar").on("singletap",".button",function(){var t,i,s=this;e.publish("chui/navigate/leave",e("article.current")[0].id),s.classList.add("selected"),e(s).siblings("a").removeClass("selected"),t=e(this).index(),e("article.previous").removeClass("previous").addClass("next"),e("nav.previous").removeClass("previous").addClass("next"),e("article.current").removeClass("current").addClass("next"),e("nav.current").removeClass("current").addClass("next"),e("article").eq(t).removeClass("next").addClass("current"),e("nav").eq(t+1).removeClass("next").addClass("current"),i=e("article").eq(t)[0].id,e.publish("chui/navigate/enter",i),e("article").forEach(function(t){window.jQuery?e(t).scrollTop(0):window.$chocolatechipjs&&(t.scrollTop=0)
}),e.UISetHashOnUrl("#"+i),e.UINavigationHistory=["#"+i]})}}}),e.extend({templates:{},template:function(e,t){var i;t=t||"data",i=/\[\[=([\s\S]+?)\]\]/g;var s=new Function(t,"var p=[];p.push('"+e.replace(/[\r\t\n]/g," ").split("'").join("\\'").replace(i,"',$1,'").split("[[").join("');").split("]]").join("p.push('")+"');return p.join('');");return s}}),e.extend({UISearch:function(t){var i=t&&t.articleId||e("article").eq(0),s=t&&t.id||e.Uuid(),n=t&&t.placeholder||"search",a=t&&t.results||1,o='<div class="searchBar"><input placeholder="'+n+'" type="search" results="'+a+'" id="'+s+'"></div>';e(i).find("section").prepend(o),e.isWin&&(e(i).prev().append(o),e("#"+s).parent().append('<span class="searchGlyph">&#xe11A;</span>'))}}),e(function(){var t=function(){function t(e){return""===s?e:(e=e.charAt(0).toUpperCase()+e.substr(1),s+e)}var i=document.createElement("div").style,s=function(){for(var e,t="t,webkitT".split(","),s=t.length,n=0;s>n;n++)if(e=t[n]+"ransform",e in i)return t[n].substr(0,t[n].length-1);return!1}(),n=s?"-"+s.toLowerCase()+"-":"",a=t("transform"),o=t("transitionDuration"),r="ontouchstart"in window,l=e.eventStart,c=e.eventMove,d=e.eventEnd,u=e.eventCancel,h=function(){if(s===!1)return!1;var e={"":"transitionend",webkit:"webkitTransitionEnd"};return e[s]}(),p=function(t){if(t){var i,s,a;this.carouselContainer="string"==typeof t.target?document.querySelector(t.target):t.target,this.options={panels:t.panels||3,snapThreshold:null,loop:t.loop||!0},e.isRTL&&(t.loop=!0);for(var o in t)this.options[o]=t[o];this.carouselContainer.style.overflow="hidden",this.carouselContainer.style.position="relative",this.carouselPanels=[],i=document.createElement("ul"),i.className="carousel-track",i.style.cssText="position:relative;top:0;height:100%;width:100%;"+n+"transition-duration:0;"+n+"transform:translateZ(0);"+n+"transition-timing-function:ease-out",this.carouselContainer.appendChild(i),this.track=i,this.refreshSize();for(var r,u=-1;2>u;u++)s=document.createElement("li"),s.id="carousel-panel-"+(u+1),s.style.cssText=n+"transform:translateZ(0);position:absolute;top:0;height:100%;width:100%;left:"+100*u+"%",r=-1===u?this.options.panels-1:u,e(s).data("upcomingPanelIndex",r),this.options.loop||-1!==u||(s.style.visibility="hidden"),this.track.appendChild(s),this.carouselPanels.push(s);a=this.carouselPanels[1].className,this.carouselPanels[1].className=a?a+" carousel-panel-active":"carousel-panel-active",this.carouselContainer.addEventListener(l,this,!1),this.carouselContainer.addEventListener(c,this,!1),this.carouselContainer.addEventListener(d,this,!1),this.track.addEventListener(h,this,!1);var p;if(t.pagination){p=document.createElement("ul"),p.className="pagination";for(var v=0;v<panels.length;v++)s=document.createElement("li"),0===v&&(s.className="selected"),p.appendChild(s);window.$chocolatechipjs?this.carouselContainer.insertAdjacentElement("afterEnd",p):e(this.carouselContainer).after(p)}}};return p.prototype={currentPanel:1,x:0,panel:0,customEvents:[],onSlide:function(e){this.carouselContainer.addEventListener("carousel-panel-move",e,!1),this.customEvents.push(["move",e])},destroy:function(){for(;this.customEvents.length;)this.carouselContainer.removeEventListener("carousel-panel-"+this.customEvents[0][0],this.customEvents[0][1],!1),this.customEvents.shift();this.carouselContainer.removeEventListener(l,this,!1),this.carouselContainer.removeEventListener(c,this,!1),this.carouselContainer.removeEventListener(d,this,!1),this.track.removeEventListener(h,this,!1)},refreshSize:function(){this.carouselContainerWidth=this.carouselContainer.clientWidth,this.carouselContainerHeight=this.carouselContainer.clientHeight,this.panelWidth=this.carouselContainerWidth,this.maxX=-this.options.panels*this.panelWidth+this.carouselContainerWidth,this.snapThreshold=null===this.options.snapThreshold?Math.round(.15*this.panelWidth):/%/.test(this.options.snapThreshold)?Math.round(this.panelWidth*this.options.snapThreshold.replace("%","")/100):this.options.snapThreshold},updatePanelCount:function(e){this.options.panels=e,this.maxX=-this.options.panels*this.panelWidth+this.carouselContainerWidth},goToPanel:function(t){this.carouselPanels[this.currentPanel].className=this.carouselPanels[this.currentPanel].className.replace(/(^|\s)carousel-panel-active(\s|$)/,""),t=0>t?0:t>this.options.panels-1?this.options.panels-1:t,console.log("p: ",t),this.panel=t,this.track.style[o]="0s",this.getPosition(-t*this.panelWidth),this.currentPanel=this.panel+1-3*Math.floor((this.panel+1)/3),this.carouselPanels[this.currentPanel].className=this.carouselPanels[this.currentPanel].className+" carousel-panel-active",0===this.currentPanel?(this.carouselPanels[2].style.left=100*this.panel-100+"%",this.carouselPanels[0].style.left=100*this.panel+"%",this.carouselPanels[1].style.left=100*this.panel+100+"%",e(this.carouselPanels[2]).data("upcomingPanelIndex",0===this.panel?this.options.panels-1:this.panel-1),e(this.carouselPanels[0]).data("upcomingPanelIndex",this.panel),e(this.carouselPanels[1]).data("upcomingPanelIndex",this.panel===this.options.panels-1?0:this.panel+1)):1===this.currentPanel?(this.carouselPanels[0].style.left=100*this.panel-100+"%",this.carouselPanels[1].style.left=100*this.panel+"%",this.carouselPanels[2].style.left=100*this.panel+100+"%",e(this.carouselPanels[0]).data("upcomingPanelIndex",0===this.panel?this.options.panels-1:this.panel-1),e(this.carouselPanels[1]).data("upcomingPanelIndex",this.panel),e(this.carouselPanels[2]).data("upcomingPanelIndex",this.panel===this.options.panels-1?0:this.panel+1)):(this.carouselPanels[1].style.left=100*this.panel-100+"%",this.carouselPanels[2].style.left=100*this.panel+"%",this.carouselPanels[0].style.left=100*this.panel+100+"%",e(this.carouselPanels[1]).data("upcomingPanelIndex",0===this.panel?this.options.panels-1:this.panel-1),e(this.carouselPanels[2]).data("upcomingPanelIndex",this.panel),e(this.carouselPanels[0]).data("upcomingPanelIndex",this.panel===this.options.panels-1?0:this.panel+1)),this.slide()},handleEvent:function(e){switch(e.type){case l:this.start(e);break;case c:this.move(e);break;case u:case d:this.end(e)}},getPosition:function(e){this.x=e,this.track.style[a]="translate("+e+"px,0) translateZ(0)"},resize:function(){this.refreshSize(),this.track.style[o]="0s",this.getPosition(-this.panel*this.panelWidth)},start:function(e){if(!this.initiated){var t=r?e.touches[0]:e;this.initiated=!0,this.moved=!1,this.thresholdExceeded=!1,this.startX=t.pageX,this.startY=t.pageY,this.pointX=t.pageX,this.pointY=t.pageY,this.stepsX=0,this.stepsY=0,this.directionX=0,this.directionLocked=!1,this.track.style[o]="0s",this.event("touchstart")}},move:function(e){if(this.initiated){{var t=r?e.touches[0]:e,i=t.pageX-this.pointX,s=t.pageY-this.pointY,n=this.x+i;Math.abs(t.pageX-this.startX)}if(this.moved=!0,this.pointX=t.pageX,this.pointY=t.pageY,this.directionX=i>0?1:0>i?-1:0,this.stepsX+=Math.abs(i),this.stepsY+=Math.abs(s),!(this.stepsX<10&&this.stepsY<10)){if(!this.directionLocked&&this.stepsY>this.stepsX)return void(this.initiated=!1);e.preventDefault(),this.directionLocked=!0,!this.options.loop&&(n>0||n<this.maxX)&&(n=this.x+i/2),this.getPosition(n)}}},end:function(e){if(this.initiated){var t=r?e.changedTouches[0]:e,i=Math.abs(t.pageX-this.startX);if(this.initiated=!1,this.moved)return!this.options.loop&&(this.x>0||this.x<this.maxX)&&(i=0),i<this.snapThreshold?(this.track.style[o]=Math.floor(300*i/this.snapThreshold)+"ms",void this.getPosition(-this.panel*this.panelWidth)):void this.checkPosition()}},checkPosition:function(){var t,i,s;this.carouselPanels[this.currentPanel].className="",this.directionX>0?(this.panel=-Math.ceil(this.x/this.panelWidth),this.currentPanel=this.panel+1-3*Math.floor((this.panel+1)/3),t=this.currentPanel-1,t=0>t?2:t,this.carouselPanels[t].style.left=100*this.panel-100+"%",i=this.panel-1):(this.panel=-Math.floor(this.x/this.panelWidth),this.currentPanel=this.panel+1-3*Math.floor((this.panel+1)/3),t=this.currentPanel+1,t=t>2?0:t,this.carouselPanels[t].style.left=100*this.panel+100+"%",i=this.panel+1),s=this.carouselPanels[this.currentPanel].className,/(^|\s)carousel-panel-active(\s|$)/.test(s)||(this.carouselPanels[this.currentPanel].className=s?s+" carousel-panel-active":"carousel-panel-active"),s=this.carouselPanels[t].className,i-=Math.floor(i/this.options.panels)*this.options.panels,e(this.carouselPanels[t]).data("upcomingPanelIndex",i);var n=-this.panel*this.panelWidth;this.track.style[o]=Math.floor(500*Math.abs(this.x-n)/this.panelWidth)+"ms",this.options.loop||(this.carouselPanels[t].style.visibility=0===n||n===this.maxX?"hidden":""),this.x===n?this.slide():(this.getPosition(n),this.slide())},slide:function(){this.event("move")},event:function(e){var t=document.createEvent("Event");t.initEvent("carousel-panel-"+e,!0,!0),this.carouselContainer.dispatchEvent(t)}},p}();e.extend({UISetupCarousel:function(i){function s(e){var t=e.shift(0);return e.reverse(),e.unshift(t),e}if(i){i.loop=i.loop||!1;var n=new t({target:i.target,panels:i.panels.length,loop:i.loop,pagination:i.pagination});e(i.target).data("carousel",n),e.isRTL&&(i.panels=s(i.panels));for(var a,o=0;3>o;o++)a=0===o?i.panels.length-1:o-1,n.carouselPanels[o].innerHTML=i.panels[Number(a)];var r=0,l=e(i.target).next(".pagination");n.onSlide(function(){for(var t=0;3>t;t++){var s=e(n.carouselPanels[t]).data("upcomingPanelIndex");n.carouselPanels[t].innerHTML=i.panels[Number(s)]}r=e(".carousel-panel-active").data("upcomingPanelIndex"),l.find("li").removeClass("selected"),e.isRTL?(l.find("li").removeClass("selected"),1>r?l.find("li").eq(0).addClass("selected"):l.find("li").eq(i.panels.length-r).addClass("selected")):l.find("li").eq(r).addClass("selected")}),e(i.target).on("mousedown","img",function(){return!1});var c=e(i.target).css("width");l.css("width",c),l.on("click","li",function(){e(this).siblings("li").removeClass("selected"),e(this).addClass("selected");var t=0;if(e.isRTL){var i=e(this).parent().children("li").length;0===e(this).index()?n.goToPanel(0):(t=i-e(this).index(),n.goToPanel(t)),e(this).siblings("li").removeClass("selected"),e(this).addClass("selected")}else n.goToPanel(0===e(this).index()?0:e(this).index())})}}})}),e.fn.extend({UIRange:function(){if(!e.isWin&&"INPUT"===this[0].nodeName){var t,i=e(this),s=i.width(),n=(i.val()-i.attr("min"))/(i.attr("max")-i.attr("min")),a=-1.3;0>n?t=0:n>1?t=s:(t=s*n+a,a-=n),i.css({"background-size":Math.round(t)+"px 10px"})}}}),e(function(){e("input[type=range]").forEach(function(t){e(t).UIRange()}),e("body").on("input","input[type=range]",function(){e(this).UIRange()})}),e.extend({UISelectBox:function(){if(!e.isDesktop&&e.isiOS)e(".select-box-label").forEach(function(t){var i=e(t),s=i.prev();s[0].id||s.attr("id",e.Uuid()),s.trigger("singletap"),i.text(s.val()),i.attr("for",s.attr("id"))}),e(".select-box select").on("change",function(){e(this).next().text(e(this).val())});else if(!e.isDesktop){var t=function(e){var t;t=document.createEvent("MouseEvents"),t.initMouseEvent("mousedown",!0,!0,window),e.dispatchEvent(t)};e.isDesktop||(e(".select-box-label").forEach(function(t){t.id||e(t).prev().attr("id",e.Uuid());var i=e(t).siblings("select").val();e(t).text(i)}),e(".select-box select").on("change",function(){var t=e(this).find("option:selected").text(),i=e(this);i.next("label").text(e(this).val()),i.siblings("label").text(t)}),e("body").on("singletap",".select-box-label",function(){t(e("select")[0])}))}}}),e(function(){e.UISelectBox()})}(window.CHUIJSLIB);